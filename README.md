# 小红书爬虫工具

一个功能完整的小红书数据采集工具，支持关键词搜索、图片视频下载、数据分析等功能。基于DrissionPage开发，提供图形界面，操作简单。

## 为什么做这个

市面上的小红书爬虫要么收费，要么功能残缺，要么早就失效了。自己动手写了一个，支持搜索、下载图片视频、提取正文评论，还能生成分析报告。代码开源，随便用。

## 功能概览

**基础功能**
- 关键词搜索爬取
- 图片批量下载（并行下载，速度快）
- 视频下载
- 笔记正文和标签提取
- 评论爬取（智能选择器）
- 数据导出（Excel/CSV/JSON）

**进阶功能**
- 多关键词批量爬取（逗号分隔）
- 博主主页爬取
- 点赞数筛选
- Cookie自动保存（下次免登录）
- 断点续传
- SQLite数据库存储
- 下载统计

**分析功能**
- 统计图表生成
- 词云生成
- Word分析报告
- 数据合并去重

## 安装

需要Python 3.8+和Chrome浏览器。

```bash
# 克隆项目
git clone https://github.com/xiaofuqing13/redbooks.git
cd redbooks

# 安装依赖
pip install -r requirements.txt

# 可选：安装分析功能依赖
pip install matplotlib wordcloud jieba python-docx
```

## 使用方法

```bash
python crawler_ultimate.py
```

打开后会看到一个窗口，操作步骤：

1. 输入要搜索的关键词（多个用逗号分隔）
2. 设置滚动次数（决定加载多少内容）
3. 在"内容选项"标签页勾选需要的内容（图片、视频、评论等）
4. 点击"开始爬取"
5. 第一次需要扫码登录，登录后点确定
6. 等待爬取完成，数据自动保存到data目录

## 文件说明

```
redbooks/
├── crawler_ultimate.py   # 主程序（功能最全）
├── requirements.txt      # 依赖
├── README.md            # 说明文档
├── data/                # 数据输出
│   ├── *.xlsx          # 爬取结果
│   ├── cookies.json    # 登录Cookie（自动保存）
│   ├── redbook.db      # SQLite数据库（可选）
│   └── crawler.log     # 运行日志
└── images/             # 下载的图片/视频
    └── 关键词/
        └── note_xxx/
            ├── img_1.jpg
            └── video.mp4
```

## 爬取模式说明

| 模式 | 速度 | 数据完整度 | 适用场景 |
|------|------|-----------|---------|
| 标准模式 | 中 | 最完整 | 需要完整数据 |
| 快速模式 | 快 | 较完整 | 日常使用 |
| 极速模式 | 极快 | 基础 | 快速预览、大量采集 |

## 快捷预设

内容选项标签页提供了几个快捷预设：

- **极速采集**：最快速度，只下载封面图
- **完整数据**：获取所有内容（图片、视频、评论等）
- **只下图片**：只下载图片，不获取其他内容
- **只下视频**：只下载视频笔记
- **只要文本**：只获取文字内容，不下载媒体

## 常见问题

**Q: 为什么要登录？**

小红书对未登录用户限制很多，登录后才能正常获取数据。Cookie会自动保存，下次不用重新登录。

**Q: 爬取速度很慢？**

1. 试试极速模式
2. 取消勾选"获取全部图片"
3. 减少滚动次数
4. 在高级设置里调低延迟

**Q: 提示找不到元素？**

小红书页面结构可能更新了，提个Issue我来修。

**Q: 图片下载失败？**

部分图片有防盗链，正常现象。失败的会自动跳过，完成后会显示下载统计。

**Q: 能爬多少数据？**

取决于滚动次数和网络。一般一次能爬几十到上百条。别太贪心，适度使用。

**Q: Cookie过期了怎么办？**

在高级设置里点"清除Cookie"，下次爬取时重新登录即可。

## 注意事项

- 仅供学习研究，请遵守小红书用户协议
- 适度使用，别搞太频繁
- 爬到的数据别用于商业用途
- 尊重创作者版权

## 技术栈

- DrissionPage：浏览器自动化
- pandas：数据处理
- tkinter：图形界面
- requests：文件下载
- matplotlib：图表生成（可选）
- wordcloud + jieba：词云（可选）
- python-docx：Word报告（可选）

## 更新日志

- v5.0：性能优化版，提升爬取速度，增强稳定性，改进UI
- v4.0：终极版发布，支持视频下载、评论爬取、数据分析
- v3.0：专业版，新增Cookie管理、日志导出
- v2.0：图形界面、并行下载
- v1.0：基础命令行版本

## 反馈

遇到问题或有建议，欢迎提Issue。

---

写代码不易，觉得有用的话给个Star吧。
